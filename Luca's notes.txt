1: exit of the piston
    if the pressure reading > Pinsp 
        solenoid valve 1 open
        once lung pressure reaches Pinsp, the sensor will read Pinsp
            this causes the solenoid valve 1 to close
            motor rotation is measured to find the displacement of the piston (delta_h)
                gives us tidal volume (delta_h * AP)
                Downward force of piston is equal to Pinsp * AP
                Tells us how much torque is needed in the motor

2: O2 Solenoid Valve

Refilling piston: flow from O2 tank and atmosphere occur simultaneously
Ptank = Pinsp at beginning of refill
    all pressures are above atmospheric
    Flow rate from O2 tank solenoid valve is Q_SOL_O2 = 12015.4145 cm^3/sec (determiend by pressures)
    volume needed to fill up is delta_h * AP = TV
        h_O2 = delta_h/.79 * (FiO2 - .21) <height the piston moves based on FiO2 input>
        volume from O2 tank is V_O2 = h_O2 * AP
            T_SOL_O2 = V_O2 / Q_SOL_O2
            KEY: Relying on the pressure from the solenoid valve to move the piston back up a certain fraction based on FiO2
        
3: Atmospheric Valve
h_air = delta_h - h_O2  
    needs to reach max position again before Texp
        V_piston after oxygen is introduced is equal to h_air / (Texp - T_SOL_O2)
            fast enough motion will reduce interior pressure to below atmospheric pressure, allowing tank to fill up with air
            volume from atmosphere is V_AIR = TV - V_O2

 

# fake changes
# more changes
# imran's changes
# Definitive equations/process for O2 and Atmospheric Air into Piston